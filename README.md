# FoodOption_TG-bot

FoodOption_TG-bot — это инновационный Telegram-бот, созданный для предложения пользователю персонализированных вариантов питания. Бот использует базу данных SQLite для хранения информации о пользователях и их предпочтениях, что позволяет предоставлять актуальные и интересные предложения по мере использования.

## Особенности

- **Персонализация предложений:** Возможность адаптации предложений под конкретного пользователя.
- **Интеграция с Telegram:** Удобное взаимодействие через популярный мессенджер.
- **Простая настройка:** Включает шаги для начальной настройки и запуска.

## Технологии

Проект использует:
- Node.js и `node-telegram-bot-api` для взаимодействия с Telegram API.
- SQLite для хранения данных о пользователях.

## Установка и Настройка

0. **Прежде всего, необходимо клонировать репозиторий и установить зависимости:**
   ```bash
   git clone https://github.com/n00rd1/FoodOption_TG-bot.git
   ```

1. **Инициализация проекта с помощью npm:**
   ```bash
   npm init -y
   ```

2. **Инициализируем npm**
   ```bash
   npm init -y
   ```

3. **Устанавливаем библиотеку для работы с telegram API**
   ```bash
   npm i node-telegram-bot-api
   ```

4. **Для хранения ключей скачиваем dotenv**
   ```bash
   npm install dotenv
   ```
5. **Устанавливаем локальную базу данных**
   ```bash
   npm install sqlite3
   ```

6. **Создаём в корне проекта файл .env и добавляем туда свои ключи для ТГ бота**
   ```dotenv
   TELEGRAM_BOT_TOKEN=*ключ*
   ADMIN_ID=ваш_id
   ```

Убедитесь, что файл .env не добавлен в репозиторий (добавьте его в .gitignore), чтобы сохранить конфиденциальность ваших данных.

## Использование
Ваш бот готов к использованию! Теперь вы можете разрабатывать и добавлять функционал для небольшой сети доставки питания в вашем проекте. Помните, что вы можете использовать переменные среды в вашем коде для безопасного доступа к ключам и другим конфиденциальным данным:
   ```javascript
   require('dotenv').config();

    // тут можно сразу указать ключ к API вашего бота, либо указать его в .env файле по примеру ниже
   const telegramBotToken = process.env.TELEGRAM_BOT_TOKEN;
   ```
   ```dotenv
    TELEGRAM_BOT_TOKEN='Ваш_API_KEY'
    ADMIN_ID=ВАШ_ID
   ```

## Запуск бота

Для запуска бота используйте команду:

```bash
node index.js
```

## Взаимодействие с ботом

После запуска бота вы можете взаимодействовать с ним через Telegram, отправляя команды и получая персонализированные предложения по питанию.

## Вклад в проект

Приветствую любой вклад в развитие проекта. Если у вас есть предложения по улучшению или вы нашли ошибку, не стесняйтесь создавать issue или pull request.

## Лицензия

Проект распространяется под лицензией MIT.

# Документация Базы Данных: Пользователи

## Обзор
Таблица `users` создана для хранения комплексной информации о пользователях. Это включает в себя идентификационные данные, контактную информацию, личные параметры, выбранные предпочтения в рационе и тренировках, а также регистрационные данные. Таблица служит основой для персонализированных предложений и функциональности трекинга прогресса пользователя.

## Структура таблицы

### id
- **Тип**: INTEGER
- **Ограничения**: PRIMARY KEY, AUTOINCREMENT
- **Описание**: Автоматически увеличивающийся идентификатор для каждого нового пользователя.

### `user_id`: Уникальный идентификатор пользователя.** 
- **Тип**: INTEGER
- **Ограничения**: UNIQUE
- **Описание**: Используется для связи профиля пользователя с его аккаунтом в `Telegram`.

### `username`: Идентификатор пользователя в Telegram.
- **Тип**: TEXT
- **Описание**: Позволяет идентифицировать пользователя по его публичному никнейму в `Telegram`.

### `phone`: Контактный номер телефона.
- **Тип**: TEXT
- **Описание**: Используется для связи с пользователем, если это необходимо..

### `gender`: Пол пользователя.
- **Тип**: TEXT
- **Ограничения**: `DEFAULT 'М', CHECK(gender IN ('М', 'Ж'))`
- **Описание**: Пол пользователя. Может принимать значения 'М' или 'Ж'. Используется для адаптации предложений.

### `height`, `middle`, `weight`, `fat`: Физические параметры пользователя, используются при индивидуальном плане питания.
- **Тип**: REAL
- **Ограничения**: `DEFAULT 0`
- **Описание**: Включают рост, обхват талии, вес и процент жира. Важны для расчета калорий и планов тренировок.

### `format`: Формат учета предпочтений.
- **Тип**: TEXT
- **Ограничения**: `DEFAULT 'общий', CHECK(format IN ('индив', 'общ'))`
- **Описание**: Формат учета (например, 'общий'). Определяет, как пользователь предпочитает учитывать свои тренировки и питание.

### `choose_weight`, `choose_price`, `choose_per_days`: Предпочтения пользователя при выборе общего формата питания.
- **Тип**: TEXT
- **Описание**: Включают предпочтение по весовой категории, ценовой категории питания и количеству дней питания.

### `activity`: Уровень активности.
- **Тип**: REAL
- **Ограничения**: `DEFAULT 0, CHECK(activity IN (1.2, 1.38, 1.46, 1.55, 1.64, 1.73, 1.9))`
- **Описание**: Уровень активности пользователя. Отражает физическую активность пользователя, влияющую на расчет калорий (при использовании индивидуального расчёта).

### `target`: Цель пользователя.
- **Тип**: TEXT
- **Ограничения**: `DEFAULT 'снижение процента жира' CHECK(target IN ('снижение процента жира', 'набор веса'))`
- **Описание**: Цель пользователя ('похудеть' или 'потолстеть'), влияющая на итоговое количество калорий.

### `state`: Статус пользователя в системе.
- **Тип**: TEXT
- **Ограничения**: `DEFAULT 'start_gender'`
- **Описание**: Отслеживает текущее состояние пользователя в воркфлоу бота для адекватного взаимодействия.

### `calories`: Количество индивидуальных калорий.
- **Тип**: REAL
- **Ограничения**: `DEFAULT 0`
- **Описание**: Количество калорий, рассчитанное для пользователя.

### registration_date
- **Тип**: DATETIME
- **Ограничения**: `DEFAULT CURRENT_TIMESTAMP`
- **Описание**: Фиксирует время создания профиля пользователя в системе.

## Использование

### Добавление нового пользователя
При добавлении нового пользователя, `id` и `registration_date` заполняются автоматически. Остальные поля заполняются в соответствии с предоставленными данными.

### Поиск пользователя
Поиск пользователя обычно выполняется по `user_id`.

## Версия и обновления

### Текущая версия
1.0

### Дата последнего обновления
27.01.2024

### История изменений
- 1.0 - Инициализация таблицы с данными пользователей.
- 1.1 - Обновление таблицы с данными пользователей, изменение структуры